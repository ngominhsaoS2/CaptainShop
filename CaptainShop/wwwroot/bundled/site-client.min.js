var commonFunctions={configs:{pageSize:10,pageIndex:1},notify:function(t,o){$.notify(t,{clickToHide:!0,autoHide:!0,autoHideDelay:5e3,arrowShow:!0,arrowSize:5,position:"...",elementPosition:"top right",globalPosition:"top right",style:"bootstrap",className:o,showAnimation:"slideDown",showDuration:400,hideAnimation:"slideUp",hideDuration:200,gap:2})},confirm:function(t,o){bootbox.confirm({message:t,buttons:{confirm:{label:"Confirm",className:"btn-success"},cancel:{label:"Cancel",className:"btn-danger"}},callback:function(t){t===!0&&o()}})},dateFormatJson:function(t){if(null==t||""==t)return"";var o=new Date(parseInt(t.substr(6))),e=o.getMonth()+1,n=o.getDate(),a=o.getFullYear(),i=o.getHours(),r=o.getMinutes();return e<10&&(e="0"+e),n<10&&(n="0"+n),i<10&&(i="0"+i),r<10&&(r="0"+r),n+"/"+e+"/"+a},dateTimeFormatJson:function(t){if(null==t||""==t)return"";var o=new Date(parseInt(t.substr(6))),e=o.getMonth()+1,n=o.getDate(),a=o.getFullYear(),i=o.getHours(),r=o.getMinutes(),s=o.getSeconds();return e<10&&(e="0"+e),n<10&&(n="0"+n),i<10&&(i="0"+i),r<10&&(r="0"+r),s<10&&(s="0"+s),n+"/"+e+"/"+a+" "+i+":"+r+":"+s},startLoading:function(){$(".dv-loading").length>0&&$(".dv-loading").removeClass("hide")},stopLoading:function(){$(".dv-loading").length>0&&$(".dv-loading").addClass("hide")},getStatus:function(t){return 1==t?'<span class="badge bg-green">Kích hoạt</span>':'<span class="badge bg-red">Khoá</span>'},formatNumber:function(t,o){if(!isFinite(t))return t.toString();var e=t.toFixed(o).split(".");return e[0]=e[0].replace(/\d(?=(\d{3})+$)/g,"$&,"),e.join(".")},unflattern:function(t){for(var o={},e=[],n=0;n<t.length;n+=1){var a=t[n];a.children=[],o[a.id]=n,null!==a.parentId?t[o[a.parentId]].children.push(a):e.push(a)}return e}};$(document).ajaxSend(function(t,o,e){if("POST"==e.type.toUpperCase()||"PUT"==e.type.toUpperCase()){var n=$("form").find("input[name='__RequestVerificationToken']").val();o.setRequestHeader("RequestVerificationToken",n)}});var BaseController=function(){function t(){$("body").on("click",".add-to-cart",function(t){t.preventDefault();var e=$(this).data("id");$.ajax({url:"/Cart/AddToCart",type:"post",data:{productId:e,quantity:1,color:0,size:0},success:function(t){commonFunctions.notify(resources.AddCartOK,"success"),o()}})}),$("body").on("click",".remove-cart",function(t){t.preventDefault();var e=$(this).data("id");$.ajax({url:"/Cart/RemoveFromCart",type:"post",data:{productId:e},success:function(t){commonFunctions.notify(resources.RemoveCartOK,"success"),o()}})})}function o(){$("#headerCart").load("/AjaxContent/HeaderCart")}this.initialize=function(){t()}},CartController=function(){function t(){$("body").on("click",".btn-delete",function(t){t.preventDefault();var o=$(this).data("id");$.ajax({url:"/Cart/RemoveFromCart",type:"post",data:{productId:o},success:function(){commonFunctions.notify("Removing product is successful.","success"),loadHeaderCart(),i()}})}),$("body").on("keyup",".txtQuantity",function(t){t.preventDefault();var o=$(this).data("id"),e=$(this).val();e>0?$.ajax({url:"/Cart/UpdateCart",type:"post",data:{productId:o,quantity:e},success:function(){commonFunctions.notify("Update quantity is successful","success"),loadHeaderCart(),i()}}):commonFunctions.notify("Your quantity is invalid","error")}),$("body").on("change",".ddlColorId",function(t){t.preventDefault();var o=parseInt($(this).closest("tr").data("id")),e=$(this).val(),n=$(this).closest("tr").find(".txtQuantity").first().val(),a=$(this).closest("tr").find(".ddlSizeId").first().val();n>0?$.ajax({url:"/Cart/UpdateCart",type:"post",data:{productId:o,quantity:n,color:e,size:a},success:function(){commonFunctions.notify("Update quantity is successful","success"),loadHeaderCart(),i()}}):commonFunctions.notify("Your quantity is invalid","error")}),$("body").on("change",".ddlSizeId",function(t){t.preventDefault();var o=parseInt($(this).closest("tr").data("id")),e=$(this).val(),n=parseInt($(this).closest("tr").find(".txtQuantity").first().val()),a=parseInt($(this).closest("tr").find(".ddlColorId").first().val());n>0?$.ajax({url:"/Cart/UpdateCart",type:"post",data:{productId:o,quantity:n,color:a,size:e},success:function(){commonFunctions.notify("Update quantity is successful","success"),loadHeaderCart(),i()}}):commonFunctions.notify("Your quantity is invalid","error")}),$("#btnClearAll").on("click",function(t){t.preventDefault(),$.ajax({url:"/Cart/ClearCart",type:"post",success:function(){commonFunctions.notify("Clear cart is successful","success"),loadHeaderCart(),i()}})})}function o(){return $.ajax({type:"GET",url:"/Cart/GetColors",dataType:"json",success:function(t){r.colors=t},error:function(){commonFunctions.notify("Has an error in progress","error")}})}function e(){return $.ajax({type:"GET",url:"/Cart/GetSizes",dataType:"json",success:function(t){r.sizes=t},error:function(){commonFunctions.notify("Has an error in progress","error")}})}function n(t){var o="<select class='form-control ddlColorId'><option value='0'>-- Chọn --</option>";return $.each(r.colors,function(e,n){o+=t===n.Id?'<option value="'+n.Id+'" selected="select">'+n.Name+"</option>":'<option value="'+n.Id+'">'+n.Name+"</option>"}),o+="</select>"}function a(t){var o="<select class='form-control ddlSizeId'> <option value='0'>-- Chọn --</option>";return $.each(r.sizes,function(e,n){o+=t===n.Id?'<option value="'+n.Id+'" selected="select">'+n.Name+"</option>":'<option value="'+n.Id+'">'+n.Name+"</option>"}),o+="</select>"}function i(){return $.ajax({url:"/Cart/GetCart",type:"GET",dataType:"json",success:function(t){var o=$("#template-cart").html(),e="",i=0;$.each(t,function(t,r){e+=Mustache.render(o,{ProductId:r.Product.Id,ProductName:r.Product.Name,Image:r.Product.Image,Price:commonFunctions.formatNumber(r.Price,0),Quantity:r.Quantity,Colors:n(null==r.Color?0:r.Color.Id),Sizes:a(null==r.Size?"":r.Size.Id),Amount:commonFunctions.formatNumber(r.Price*r.Quantity,0),Url:"/"+r.Product.SeoAlias+"-p."+r.Product.Id+".html"}),i+=r.Price*r.Quantity}),$("#lblTotalAmount").text(commonFunctions.formatNumber(i,0)),""!==e?$("#table-cart-content").html(e):$("#table-cart-content").html("You have no product in cart")}}),!1}var r={colors:[],sizes:[]};this.initialize=function(){$.when(o(),e()).then(function(){i()}),t()}},HomeController=function(){this.initialize=function(){jQuery("#rev_slider_4").show().revolution({dottedOverlay:"none",delay:5e3,startwidth:865,startheight:450,hideThumbs:200,thumbWidth:200,thumbHeight:50,thumbAmount:2,navigationType:"thumb",navigationArrows:"solo",navigationStyle:"round",touchenabled:"on",onHoverStop:"on",swipe_velocity:.7,swipe_min_touches:1,swipe_max_touches:1,drag_block_vertical:!1,spinner:"spinner0",keyboardNavigation:"off",navigationHAlign:"center",navigationVAlign:"bottom",navigationHOffset:0,navigationVOffset:20,soloArrowLeftHalign:"left",soloArrowLeftValign:"center",soloArrowLeftHOffset:20,soloArrowLeftVOffset:0,soloArrowRightHalign:"right",soloArrowRightValign:"center",soloArrowRightHOffset:20,soloArrowRightVOffset:0,shadow:0,fullWidth:"on",fullScreen:"off",stopLoop:"off",stopAfterLoops:-1,stopAtSlide:-1,shuffle:"off",autoHeight:"off",forceFullWidth:"on",fullScreenAlignForce:"off",minFullScreenHeight:0,hideNavDelayOnMobile:1500,hideThumbsOnMobile:"off",hideBulletsOnMobile:"off",hideArrowsOnMobile:"off",hideThumbsUnderResolution:0,hideSliderAtLimit:0,hideCaptionAtLimit:0,hideAllCaptionAtLilmit:0,startWithSlide:0,fullScreenOffsetContainer:""})}},ProductDetailController=function(){function t(){$("#btnAddToCart").on("click",function(t){t.preventDefault();var e=parseInt($(this).data("id")),n=parseInt($("#ddlColorId").val()),a=parseInt($("#ddlSizeId").val());$.ajax({url:"/Cart/AddToCart",type:"post",dataType:"json",data:{productId:e,quantity:parseInt($("#txtQuantity").val()),color:n,size:a},success:function(){commonFunctions.notify("Product was added successful","success"),o()}})})}function o(){$("#headerCart").load("/AjaxContent/HeaderCart")}this.initialize=function(){t()}},resources={ConfirmOK:"OK",ConfirmCancel:"Cancel",AddCartOK:"Add to cart success",RemoveCartOK:"Product has been deleted from cart"},resources={ConfirmOK:"Đồng ý",ConfirmCancel:"Hủy bỏ",AddCartOK:"Thêm vào giỏ hàng thành công",RemoveCartOK:"Đã xóa sản phẩm khỏi giỏ hàng"};